<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"
<meta name="title" content="nmon.io - website for nmon dashboard and analyze service">
<meta name="description" content="nmon. website providing nmon dashboard and analyze service in cloud">
<meta name="keywords" content="Nmon,nmon analyzer,Linux,AIX,Solaris,sarmon,topas_nmon,server,database server">
<meta name="author" content="Youngmo Eugene Kwon">
<meta http-equiv="refresh" content="30"> <!-- for ad banner replace -->
<style>
.welcome {
  border-size:2px;
  border-style:solid;
  border-radius:15px;
  border-color:darkblue;
  margin-top:10px;
  font-size:15px;
  padding:10px;
  width: 360px;
  height:160px;
}
.nmonres {
  border-size:2px;
  border-style:solid;
  border-radius:15px;
  border-color:orange;
  margin-top:10px;
  font-size:15px;
  padding:10px;
  width: 750px;
  height:400px;
}
.banner {
  border-size:2px;
  border-style:solid;
  border-radius:15px;
  border-color:orange;
  margin-top:10px;
  font-size:15px;
  padding:10px;
  width: 800x;
  height:480px;
}

</style>
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript"
          src="https://www.google.com/jsapi?autoload={
            'modules':[{
              'name':'visualization',
              'version':'1',
              'packages':['corechart']
            }]
          }"></script>
    <script type="text/javascript">
        function getHosts(category) {
                $.ajax({
                url: "/All/" + category + "/hosts",
                data: {},
                success: function( data ) {
                    var result = eval(data);
                    var html = '<option value="All">All</option>';
                    for (var i = 0; i < result.length; i++) {
                        html += '<option value="' + result[i] + '">' + result[i] + '</option>';
                    }
                    $("#hosts").html(html);
                }
            });
        }

        function drawChart(did, x, y, label, row, stack) {
            var data = new google.visualization.DataTable();
            data.addColumn('datetime', x);
            for(var i = 0; i < y.length; i++) {
                data.addColumn('number', y[i]);
            }
            for(var i = 0; i < row.length; i++) {
                row[i][0] = new Date(row[i][0]);
            }
            data.addRows(row);

            var options = {
                vAxis : { title : label },
                isStacked : stack
            };

            var chart = new google.visualization.AreaChart(document.getElementById(did));
            chart.draw(data, options);
        }

        function updateGraph(hostname, fromDate, toDate) {
            console.log(fromDate + " " + fromDate.getTime());
            console.log(toDate + " " + toDate.getTime());

            var start = +new Date();
            // cpu
            $.ajax({
                url: "/" + hostname + "/CPU_ALL?date=[" + fromDate.getTime() + "," + toDate.getTime() + "]&data=['User%25', 'Sys%25', 'Wait%25']",
                data: {},
                success: function( data ) {
                    var result = eval(data);
                    drawChart("cpu_chart", "time", ['User%', 'Sys%', 'Wait%'], '%', result, true);
                    console.log('cpu chart :' + (+new Date() - start));
                }
            });

            // memory
            $.ajax({
                url: "/" + hostname + "/MEM?date=[" + fromDate.getTime() + "," + toDate.getTime() + "]&data=['active', 'inactive', 'memfree']",
                data: {},
                success: function( data ) {
                    var result = eval(data);
                    drawChart("mem_chart", "time", ['active', 'inactive', 'memfree'], 'MB', result, true);
                    console.log('mem chart :' + (+new Date() - start));
                }
            });

            // swap
            $.ajax({
                url: "/" + hostname + "/MEM?date=[" + fromDate.getTime() + "," + toDate.getTime() + "]&data=['swaptotal', 'swapfree']",
                data: {},
                success: function( data ) {
                    var result = eval(data);
                    for(var i = 0; i < result.length; i++) {
                        result[i][2] = result[i][1] - result[i][2];
                    }
                    drawChart("swap_chart", "time", ['swaptotal', 'used'], 'MB', result, false);
                    console.log('swap chart :' + (+new Date() - start));
                }
            });

            // disk
            $.ajax({
                url: "/" + hostname + "/DISK_TOTAL?date=[" + fromDate.getTime() + "," + toDate.getTime() + "]&data=['read', 'write']",
                data: {},
                success: function( data ) {
                    var result = eval(data);
                    drawChart("disk_chart", "time", ['read', 'write'], 'KB/s', result, true);
                    console.log('disk chart :' + (+new Date() - start));
                }
            });

            // network
            $.ajax({
                url: "/" + hostname + "/NET_TOTAL?date=[" + fromDate.getTime() + "," + toDate.getTime() + "]&data=['read', 'write']",
                data: {},
                success: function( data ) {
                    var result = eval(data);
                    drawChart("network_chart", "time", ['read', 'write'], 'KB/s', result, true);
                    console.log('network chart :' + (+new Date() - start));
                }
            });
        }

        $(function() {
            getHosts('CPU_ALL');
            var today = new Date();
            $("#from").val((today.getMonth() + 1) + "/" + today.getDate() + "/" + today.getFullYear());
            $("#to").val("now");
            $("#view").click(function(event) {
                var fromDate = new Date($("#from").val());
                var toDate = new Date();
                if ($("#to").val() !== "now") {
                    toDate = new Date($("#to").val());
                    toDate.setDate(toDate.getDate() + 1);
                }
                updateGraph($("#hosts").val(), fromDate, toDate)
            });
            var fromDate = new Date($("#from").val());
            var toDate = new Date();
            updateGraph('All', fromDate, toDate);
        });
    </script>

    <style>

.googlechart {
    border-size:2px;
    border-style:dotted;
    border-radius:10px;
    border-color:black;
    margin-top:10px;
    font-size:15px;
    padding:10px;
    margin-top:0px;
    margin-bottom:0px;
    margin-left:0px;
    margin-right:0px;
    width: 1024px;
    height: 576px;
}
</style>
</head>
<body>
<table>
<tr>
<td align="center" colspan="2">
<a href="https://www.vultr.com/?ref=6842239"><img src="https://www.vultr.com/media/728x90_03.gif" width="728" height="90"></a>
</td>
</tr>
<tr>
<td>
<div id=wecome_en class="welcome">
<h2 align=center>Welcome to Nmon.io ! </h2>

<p>Sorry for your inconvenience, but we are making best efforts to open Nmon.io website and to provide services related to Nmon data analyzing and visualizing.</p>

<p>Nmon.io website will be opened in October 2015</p>
</div>
</td>
<td>
<div id="wecome_cn" class="welcome">

<h2 align=center>欢迎 Nmon.io！</h2>

<p>麻烦您，但我们正在打开 Nmon.io 网站，并提供有关数据的nmon分析和可视化服务，尽最大的努力。</p>

<p>Nmon.io网站将在2015年10月开通</p>
</div>
</td>
</tr>
<tr>
<td>
<div id="wecome_es" class="welcome">
<h2 align=center>Bienvenido a Nmon.io!</h2>

<p>Lo siento por su inconveniencia, pero estamos haciendo todo lo posible para abrir la web Nmon.io y de prestación de servicios relacionados con el análisis de datos y visualización nmon.</p>

<p>Página web Nmon.io se abrirá en octubre 2015</p>
</div>
</td>
<td>
<div id="wecome_ru" class="welcome">
<h2 align=center>Добро пожаловать в Nmon.io!</h2>

<p>К сожалению для неудобства, но мы делаем все возможное, чтобы открыть веб-сайт Nmon.io и предоставление услуг, связанных с Nmon анализа данных и визуализации.</p>

<p>Сайт Nmon.io будет открыт в октябре 2015</p>
</div>
</td>
</tr>
<tr>
<td>
<div id="wecome_en" class="welcome">
<h2 align=center>Nmon.io 에 오신 것을 환영합니다.</h2>

<p>사이트 이용에 있어 불편을 드려서 죄송합니다. Nmon.io 웹사이트 오픈 및 Nmon 데이터의 분석과 시각화 서비스의 제공을 위해 최선을 다하고 있습니다.</p>
<p>Nmon.io 사이트는 2015년 10월에 오픈될 예정입니다.</p>
</div>
</td>
<td>
<div id="wecome_ar" class="welcome">
<h2 align=center>مرحبا بكم في Nmon.io!</h2>

<p>آسف للإزعاج لكم، ولكن نحن نبذل أقصى الجهود لفتح Nmon.io الموقع وتوفير الخدمات المتعلقة Nmon تحليل البيانات وتصور.</p>

<p>سيتم فتح Nmon.io الموقع في أكتوبر 2015</p>
</div>
</td>
</tr>
<tr>
<td colspan="2" valign=top>
<div id="nmonres" class="nmonres">
<h3>Nmon resources on Internet: </h3>
<p>
<b>What is Nmon?:</b> <a href="https://en.wikipedia.org/wiki/Nmon" target="_new">https://en.wikipedia.org/wiki/Nmon</a>
<br>
<b>Nmon for Linux:</b> <a href="http://nmon.sourceforge.net/" target="_new">http://nmon.sourceforge.net/</a>
<br>
<b>Nmon for Solaris:</b> <a href="http://www.geckotechnology.com/sarmon" target="_new">http://www.geckotechnology.com/sarmon</a>
<br>
<b>Nmon Analyzer from IBM:</b> <a href="http://www.ibm.com/developerworks/aix/library/au-analyze_aix/" target="_new">http://www.ibm.com/developerworks/aix/library/au-analyze_aix/</a>
<br>
<!-- 여기에 CPU / Memory / IO 현재 서버 표시 하기 --> 
<!-- 준구 한테 물어 보고 -->

<h4><font color=blue>CPU</font></h4>
<div id="cpu_chart" class=""></div>
<br>
<h4><font color=blue>Memory</font></h4>
<div id="mem_chart" class=""></div>
<br>
<h4><font color=blue>IO</font></h4>
<div id="io_chart" class=""></div>
<br>
<h4><font color=blue>Network</font></h4>
<div id="net_chart" class=""></div>
<br>
</p>
</div>
</td>
</tr>
<tr>
<td align="center" colspan="2">
<a href="https://www.vultr.com/?ref=6842239"><img src="https://www.vultr.com/media/728x90_02.gif" width="728" height="90"></a>
</td>
</table>
</body>
</html>
